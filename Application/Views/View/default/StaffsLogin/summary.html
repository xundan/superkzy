<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>每周总结</title>
    <link href="__PUBLIC__/home/css/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript" src="__PUBLIC__/home/js/jquery-2.2.4.min.js"></script>
</head>
<style>
    body {
        margin: 0 auto;
        background-color: #d0e4d02e;
        border-width: 0 1em;
        border-style: solid;
        border-color: transparent;
    }

    .typ {
        margin-top: 1em;
    }

    label {
        display: inline-block;
        width: 10em;
        padding-bottom: .5em;
        font-size: 1.5em;
        font-weight: bold;
    }

    textarea {
        resize: none;
    }

    button {
        width: 8em;
        height: 3em;
        font-size: 1em;
    }

</style>
<body>
<div class="title" style="text-align: center;line-height: 9em">
    <h1>周工作总结</h1>
</div>
<div id="content">
    <div class="container">
        <input type="hidden" id="user_id" value="{$cur_user['id']}">
        <input type="hidden" id="user_name" value="{$cur_user['user_name']}">
        <div class="typ">
            <label for="process">上周进展</label>
            <textarea cols="139" rows="4" name="textarea" id="process"></textarea>
        </div>
        <div class="typ">
            <label for="process">本周计划</label>
            <textarea cols="139" rows="4" name="textarea" id="project"></textarea>
        </div>
        <div class="typ">
            <label for="problem">问题</label>
            <textarea cols="139" rows="3" name="textarea" id="problem"></textarea>
        </div>
        <div class="typ">
            <label for="propose">建议</label>
            <textarea cols="139" rows="3" name="textarea" id="propose"></textarea>
        </div>
    </div>
</div>
<div id="submit" style="text-align: center;margin-top: 1em">
    <button type="submit" class="btn btn-primary">提交</button>
</div>
<div id="goback" style="text-align: center;margin-top: 1em">
    <button type="submit" class="btn btn-warning">返回</button>
</div>

</body>
<script>
    //    提交
    $('.btn-primary').click(function () {
        //获取表单数据
        var $this = $(this);
        var user_id = $('#user_id').val();
        var user_name = $('#user_name').val();
        var process = $('#process').val();
        var project = $('#project').val();
        var problem = $('#problem').val();
        var propose = $('#propose').val();
        console.log(user_id,process,project,problem,propose);
//        return false;
        $.ajax({
            type:'post',
            url:"{:U('StaffsLogin/summary_submit')}",
            data:{
                uid: user_id,
                name: user_name,
                process: process,
                project: project,
                problem: problem,
                propose: propose
            },
            success: function(data){
                console.log(data);
                if(data == 'success'){
                    alert('提交成功！');
                    $this.addClass('disabled');
                    $this.attr('disabled','disabled');
                }else{
                    alert('提交失败！')
                }
            }
        })

    });
    //    返回
    $('.btn-warning').click(function(){
        window.location.href = "{:U('StaffsLogin/UserProfile')}";
    })
</script>
</html>